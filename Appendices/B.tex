\chap{MIA Implementation code}
\label{MIA_Implementation}
\section{MIA: Imported libraries}
\label{MIA_Libraries}
The "pandas" library will be very useful for read the data from CSV dataset and setup the plot abut it.
\begin{lstlisting}
import pandas as pd
\end{lstlisting}

The "numpy" library it's used for mathematic purpose, such as calculating the correlation coefficent between two series.
\begin{lstlisting}
import numpy as np
\end{lstlisting}

\begin{lstlisting}
import sys
\end{lstlisting}


\begin{lstlisting}
pyplot.style.use('ggplot')
\end{lstlisting}
 
The "pyplot" library it's used for basic graphic displaying and customization, easy to use but very efficent.
\begin{lstlisting}
import matplotlib.pyplot as pyplot
\end{lstlisting}

\section{MIA section I: Total Correlation Coefficients}
\label{MIA_section_I}

\begin{lstlisting}
series = pd.read_csv("Datasets/" + sys.argv[1]+".csv", usecols=range(2,10), header=0)
corr = []
for column in series:
    corr.append(series[column].values)
# Calculatic che correlation coefficent between each year of the input dataset
corrRes = np.corrcoef(corr)

mat = np.matrix(corrRes)
dataframe = pd.DataFrame(data=mat.astype(float))
dataframe.to_csv("Results/"+sys.argv[1]+"/Total_Evidences/"+sys.argv[1]+"_CorrCoeff.csv", sep=',', header=False, float_format='%.2f', index=False)

fig = pyplot.figure()
ax = fig.add_subplot(111)
# Displaying the matrix with the results about correlation coefficents
cax = ax.matshow(corrRes, interpolation='nearest')
labels = []
j = 1
for i in range(len(series.columns)+1):
		if i == 0:
			labels.append("")
		else:
			labels.append(series.columns[i-1])
ax.set_xticklabels(labels)
ax.set_yticklabels(labels)
pyplot.setp(ax.get_xticklabels(), rotation=30, horizontalalignment='left')
pyplot.setp(ax.get_yticklabels(), rotation=30, horizontalalignment='right')
#cax.set_clim(vmin=0.5, vmax=1) 
pyplot.colorbar(cax)
pyplot.title("Correlation Coefficients Matrix - " + sys.argv[1], y=1.15)
pyplot.tight_layout()
pyplot.savefig("Results/" + sys.argv[1]+"/Total_Evidences/"+sys.argv[1]+"_Total_Matrix.jpg", format="jpg")

\end{lstlisting}
\section{MIA section II: Normalized Angular Coefficients}
\label{MIA_section_II}

\begin{lstlisting}
fig2 = pyplot.figure()
ax2 = fig2.add_subplot(111)
temp = [] 
for i in series.columns:
	index = sys.argv[1]+"-"+i
	tempSeries = pd.read_csv("Results/"+sys.argv[1]+"/"+i+"/"+sys.argv[1]+"_"+i+"_AngCoeff.csv", header=0)
	temp.append(tempSeries[index].values[1])
x = range(len(series.columns))

pyplot.barh(x, temp)
# Displaying and saving the bar graphic  
pyplot.yticks(x,series.columns)
pyplot.title("Normalized Angular coefficients - " + sys.argv[1])
pyplot.tight_layout()
pyplot.savefig("Results/"+sys.argv[1]+"/Total_Evidences/"+sys.argv[1]+"_Norm_Ang_Coeffs.jpg", format="jpg")

\end{lstlisting}
