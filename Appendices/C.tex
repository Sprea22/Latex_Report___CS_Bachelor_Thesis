\chapter{Norway's Map System Implementation Code}
\label{MapNOR}
\begin{lstlisting}
import os
import sys
import matplotlib
import pandas as pd
import cartopy.crs as ccrs
import matplotlib.cm as cmx
import matplotlib.pyplot as plt
import matplotlib.patches as mpatches
import cartopy.io.shapereader as shpreader
\end{lstlisting}

\begin{lstlisting}
def add_geom(axes, shapeInput, labelInput, colorInput):
	axes.add_geometries(shapeInput, ccrs.Robinson(), edgecolor='black',label = labelInput, facecolor=colorInput, alpha=0.8)
	return mpatches.Rectangle((0, 0), 1, 1, facecolor=colorInput)
\end{lstlisting}

\begin{lstlisting}
def main():
# Downloaded from http://biogeo.ucdavis.edu/data/gadm2.8/shp/NOR_adm_shp.zip
	fname = 'Datasets/NOR/NOR_adm1.shp'
	NOR_shapes = list(shpreader.Reader(fname).geometries())
	plt.figure()
	ax = plt.axes(projection=ccrs.Robinson())
	ax.coastlines(resolution='10m')
	ax.set_extent([4, 32, 57, 72], ccrs.Robinson())	

	colMap='bwr'
	dataInput = sys.argv[1]
	inputSeries = pd.read_csv("Datasets/countiesAverages.csv")

	inputValues = [inputSeries[dataInput][0], inputSeries[dataInput][1], inputSeries[dataInput][2], inputSeries[dataInput][3],
	inputSeries[dataInput][4], inputSeries[dataInput][5],inputSeries[dataInput][6], inputSeries[dataInput][7], 							inputSeries[dataInput][8]]

	cm = plt.get_cmap(colMap)
	mininputValues = min(inputValues)
	cNorm = matplotlib.col.Normalize(vmin=mininputValues, vmax=max(inputValues))
	scalarMap = cmx.ScalarMappable(norm=cNorm, cmap=cm)	
	col = scalarMap.to_rgba(inputValues)	
	scalarMap.set_array(inputValues)
	plt.colorbar(scalarMap,label='Input Value')
	norway = add_geom(ax, NOR_shapes, "Norway", "gray")
	finnmark = add_geom(ax, NOR_shapes[4], "Finnmark", col[0])
	troms = add_geom(ax, NOR_shapes[16], "Troms", col[1])
	nordland = add_geom(ax, NOR_shapes[9], "Nordland", col[2])
	nord_trondelag = add_geom(ax, NOR_shapes[8], "Nord Trondelag", col[3])
	sor_trondelag = add_geom(ax, NOR_shapes[13], "Sor Trondelag", col[4])
	more_og_romsdal = add_geom(ax, NOR_shapes[7], "More og Romsdal", col[5])
	sogn_og_fjordane = add_geom(ax, NOR_shapes[14], "Sogn og Fjordane", col[6])
	hordaland = add_geom(ax, NOR_shapes[6], "Hordaland", col[7])
	rogaland_og_agder = add_geom(ax, NOR_shapes[2], "Rogaland og Agder", col[8])
	rogaland_og_agder = add_geom(ax, NOR_shapes[12], "Rogaland og Agder", col[8])
	rogaland_og_agder = add_geom(ax, NOR_shapes[17], "Rogaland og Agder", col[8])

	plt.title('Norway - '+sys.argv[1] , fontsize=35)
	labels = ['Finnmark', 'Troms', 'Nordland','Nord Trondelag', 'Sor Trondelag', 'More og Romsdal',	'Sogn og Fjordane', 'Hordaland', 	'Rogaland og Agder','Other counties', ]
	plt.legend([finnmark, troms, nordland, nord_trondelag, sor_trondelag, 
		more_og_romsdal, sogn_og_fjordane, hordaland, rogaland_og_agder, norway], 
		labels, loc='lower right', fancybox=True)
	manager = plt.get_current_fig_manager()
	manager.resize(*manager.window.maxsize())
	plt.show()

if __name__ == '__main__':
   main()
\end{lstlisting}